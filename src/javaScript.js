


var socios = [
    {
      "Num_Socio": 1,
      "Nome": "Joaquim Barata",
      "Data_Nascimento": "12/02/1978",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 2,
      "Nome": "Nuno Tavares",
      "Data_Nascimento": "20/07/1993",
      "Data_Socio": "03/07/1992",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 3,
      "Nome": "Luisa Amaro",
      "Data_Nascimento": "14/08/1989",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 4,
      "Nome": "Paulo Matos",
      "Data_Nascimento": "12/04/1987",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 5,
      "Nome": "Rodrigo Matos",
      "Data_Nascimento": "30/12/1979",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 6,
      "Nome": "Francisco Domingos",
      "Data_Nascimento": "01/07/1990",
      "Data_Socio": "08/09/1994",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 7,
      "Nome": "Joana Mendes",
      "Data_Nascimento": "09/09/1999",
      "Data_Socio": "04/04/2006",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 8,
      "Nome": "Maria Costa",
      "Data_Nascimento": "23/11/1984",
      "Data_Socio": "05/07/2004",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 9,
      "Nome": "Pedro Miguel",
      "Data_Nascimento": "09/03/1979",
      "Data_Socio": "01/12/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 10,
      "Nome": "Elisa Ferreira",
      "Data_Nascimento": "28/04/1981",
      "Data_Socio": "12/02/1996",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 11,
      "Nome": "Joaquim Barata",
      "Data_Nascimento": "12/02/1978",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 12,
      "Nome": "Nuno Tavares",
      "Data_Nascimento": "20/07/1993",
      "Data_Socio": "03/07/1992",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 13,
      "Nome": "Luisa Amaro",
      "Data_Nascimento": "14/08/1989",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 14,
      "Nome": "Paulo Matos",
      "Data_Nascimento": "12/04/1987",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 15,
      "Nome": "Rodrigo Matos",
      "Data_Nascimento": "30/12/1979",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 16,
      "Nome": "Francisco Domingos",
      "Data_Nascimento": "01/07/1990",
      "Data_Socio": "08/09/1994",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 17,
      "Nome": "Joana Mendes",
      "Data_Nascimento": "09/09/1999",
      "Data_Socio": "04/04/2006",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 18,
      "Nome": "Maria Costa",
      "Data_Nascimento": "23/11/1984",
      "Data_Socio": "05/07/2004",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 19,
      "Nome": "Pedro Miguel",
      "Data_Nascimento": "09/03/1979",
      "Data_Socio": "01/12/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 20,
      "Nome": "Elisa Ferreira",
      "Data_Nascimento": "28/04/1981",
      "Data_Socio": "12/02/1996",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 1,
      "Nome": "Joaquim Barata",
      "Data_Nascimento": "12/02/1978",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 2,
      "Nome": "Nuno Tavares",
      "Data_Nascimento": "20/07/1993",
      "Data_Socio": "03/07/1992",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 3,
      "Nome": "Luisa Amaro",
      "Data_Nascimento": "14/08/1989",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 4,
      "Nome": "Paulo Matos",
      "Data_Nascimento": "12/04/1987",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 5,
      "Nome": "Rodrigo Matos",
      "Data_Nascimento": "30/12/1979",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 6,
      "Nome": "Francisco Domingos",
      "Data_Nascimento": "01/07/1990",
      "Data_Socio": "08/09/1994",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 7,
      "Nome": "Joana Mendes",
      "Data_Nascimento": "09/09/1999",
      "Data_Socio": "04/04/2006",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 8,
      "Nome": "Maria Costa",
      "Data_Nascimento": "23/11/1984",
      "Data_Socio": "05/07/2004",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 9,
      "Nome": "Pedro Miguel",
      "Data_Nascimento": "09/03/1979",
      "Data_Socio": "01/12/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 10,
      "Nome": "Elisa Ferreira",
      "Data_Nascimento": "28/04/1981",
      "Data_Socio": "12/02/1996",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 11,
      "Nome": "Joaquim Barata",
      "Data_Nascimento": "12/02/1978",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 12,
      "Nome": "Nuno Tavares",
      "Data_Nascimento": "20/07/1993",
      "Data_Socio": "03/07/1992",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 13,
      "Nome": "Luisa Amaro",
      "Data_Nascimento": "14/08/1989",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 14,
      "Nome": "Paulo Matos",
      "Data_Nascimento": "12/04/1987",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 15,
      "Nome": "Rodrigo Matos",
      "Data_Nascimento": "30/12/1979",
      "Data_Socio": "04/05/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 16,
      "Nome": "Francisco Domingos",
      "Data_Nascimento": "01/07/1990",
      "Data_Socio": "08/09/1994",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 17,
      "Nome": "Joana Mendes",
      "Data_Nascimento": "09/09/1999",
      "Data_Socio": "04/04/2006",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 18,
      "Nome": "Maria Costa",
      "Data_Nascimento": "23/11/1984",
      "Data_Socio": "05/07/2004",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 19,
      "Nome": "Pedro Miguel",
      "Data_Nascimento": "09/03/1979",
      "Data_Socio": "01/12/1991",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    },
    {
      "Num_Socio": 20,
      "Nome": "Elisa Ferreira",
      "Data_Nascimento": "28/04/1981",
      "Data_Socio": "12/02/1996",
      "Morada": "Morada x",
      "email": "x@ansjndasjkf.pt",
      "telefone": 98222444
    }
   ];

/*
Funcions to create a dinamic table from java script
Currently loading data from inner array must change to outer surce
*/

function addCell (tr,val) {
  var td = document.createElement('td');
  td.innerHTML = val;

  tr.appendChild(td);
}

function addHeaders (tr, val){
  var td = document.createElement('th');
  td.innerHTML = val;

  tr.appendChild(td);
}

function addRowHeaders (tbl, val_1, val_2, val_3, val_4, val_5, val_6, val_7) {
  var tr = document.createElement('tr');

  addHeaders(tr,val_1);
  addHeaders(tr,val_2);
  addHeaders(tr,val_3);
  addHeaders(tr,val_4);
  addHeaders(tr,val_5);
  addHeaders(tr,val_6);
  addHeaders(tr,val_7);

  tbl.appendChild(tr);
}


function addRow (tbl, val_1, val_2, val_3, val_4, val_5, val_6, val_7) {
  var tr = document.createElement('tr');

  addCell(tr,val_1);
  addCell(tr,val_2);
  addCell(tr,val_3);
  addCell(tr,val_4);
  addCell(tr,val_5);
  addCell(tr,val_6);
  addCell(tr,val_7);

  tbl.appendChild(tr);
}

//************************************************************************** */




console.log(numeroLinhas);



/*
Função chamada no load da pagina que cria a tablea com base no numero de linhas que se quer ver
Tambem criar o numero de botoes necessarios para mostrar o conteudo todo.
*/
function createTable() {

  clearTAbleBox();

  var numeroLinhas = numeroLinhasSelecionas();
  
  criarButoes(socios.length,numeroLinhas);

  if (socios.length != 0){

    tbl = document.getElementById('tbl');
    addRowHeaders(tbl,'Num_Socio', 'Nome', 'Data_Nascimento', 'Data_Socio','Morada','email','telefone');

    var loopLenght;
    if (numeroLinhas < socios.length){
      loopLenght = numeroLinhas;
    } else {
      loopLenght = socios.length;
    }

    for (i=0; i < loopLenght; i++) {
      addRow(tbl,socios[i].Num_Socio,socios[i].Nome,socios[i].Data_Nascimento,socios[i].Data_Socio,socios[i].Morada,socios[i].email,socios[i].telefone);
    }
  } else {
    document.getElementById("demo").innerHTML = "Nao existem socios para mostrar :' (";
  }
}

/*
Função que pega no conteudo todo do array e cria uma tabela com ele usada para quando se procura alguma coisa não estar limitado ao que se mostra
no botao selecionado mas procurar na tabela toda
*/
function createFullTable() {
  clearTAbleBox();
  tbl = document.getElementById('tbl');
  addRowHeaders(tbl,'Num_Socio', 'Nome', 'Data_Nascimento', 'Data_Socio','Morada','email','telefone');

  for (i=0; i < socios.length; i++) 
    addRow(tbl,socios[i].Num_Socio,socios[i].Nome,socios[i].Data_Nascimento,socios[i].Data_Socio,socios[i].Morada,socios[i].email,socios[i].telefone);

}

/*
Função que cria a tabela quando se clica no botao. Pois o numero do botao e a quantidade de linhas que se quer influencia one se esta no array
e onde se esta é dependente do numero de linhas que se quer mostrar e do numero de botao.
*/

function createTableFromButton(valor){
  document.getElementById("tbl").innerHTML = "";
  var tamanhoArray = socios.length;
   var numeroLinhas = numeroLinhasSelecionas();  
  var numBotao = document.getElementById(valor).getAttribute("value");
    console.log(numBotao);

    tbl = document.getElementById('tbl');
    addRowHeaders(tbl,'Num_Socio', 'Nome', 'Data_Nascimento', 'Data_Socio','Morada','email','telefone');

    if (numBotao*numeroLinhas >= tamanhoArray)
      for (i=numBotao*numeroLinhas-numeroLinhas; i<tamanhoArray;i++)
         addRow(tbl,socios[i].Num_Socio,socios[i].Nome,socios[i].Data_Nascimento,socios[i].Data_Socio,socios[i].Morada,socios[i].email,socios[i].telefone);
    else
       for (i=numBotao*numeroLinhas-numeroLinhas; i<=numBotao*numeroLinhas;i++)
           addRow(tbl,socios[i].Num_Socio,socios[i].Nome,socios[i].Data_Nascimento,socios[i].Data_Socio,socios[i].Morada,socios[i].email,socios[i].telefone);
}


//Limpa por completo a zona da tabela incluido os botoes que esta cada um no seu <div>
function clearTAbleBox () {
  document.getElementById("tbl").innerHTML = "";
  document.getElementById("buttonHolder").innerHTML = "";

}


//Vai buscar o numero de linhas selcionas na tag <select> e retorna o valor
function numeroLinhasSelecionas() {
  var elementoLinhasSelecionadas = document.getElementById("numeroLinhas");
  return numeroLinhas = elementoLinhasSelecionadas.options[elementoLinhasSelecionadas.selectedIndex].value;
}


/*
Função que cria cada butao com os atributos necessarios
*/
function addButton (numeroButao) {
  var butao = document.createElement('button');

 butao.setAttribute("id","butao"+numeroButao); 
 butao.setAttribute("type","button");
 butao.setAttribute("value",numeroButao);
 butao.addEventListener('click',function(){createTableFromButton("butao"+numeroButao)});
 butao.innerText = numeroButao;

  var paiButao = document.getElementById('buttonHolder');
  paiButao.append(butao);
}



/*
Pega na função anterior e cria o numero de butoes necessarios que tendo em conta o numero de linhas a mostrar
selecionado e o tamnho do array criar dinamicamente os butoes necessarios para que seja possivel a visualizxação de todo o conteudo
*/
function criarButoes (totalLinhas, linhasSelecionadas) {
  var valor = Math.ceil(totalLinhas/linhasSelecionadas);
  var numeorBotao = 1;

  while (valor > 0 ){    
    addButton(numeorBotao);
    valor --;
    numeorBotao ++;
  }
}


//Função de pesquisa pelo array
function seacrh(){

  createFullTable();

  var input = document.getElementById('valorPesquisa');
  var filter = input.value.toUpperCase();
  var table = document.getElementById('tbl');
  var tr = table.getElementsByTagName('tr');

  for (var i=0; i < tr.length; i++){
    var td = tr[i].getElementsByTagName("td")[1];

    if (td) {
      var txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display="";
      } else {
        tr[i].style.display="none";
      }
    }

  }

}

//Cria a tabela quando o broswer faz o load da pagina
window.onload = createTable();